var N=Object.defineProperty;var k=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var B=(e,u,t)=>u in e?N(e,u,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[u]=t,F=(e,u)=>{for(var t in u||(u={}))O.call(u,t)&&B(e,t,u[t]);if(k)for(var t of k(u))I.call(u,t)&&B(e,t,u[t]);return e};var w=(e,u,t)=>new Promise((p,m)=>{var _=a=>{try{o(t.next(a))}catch(s){m(s)}},h=a=>{try{o(t.throw(a))}catch(s){m(s)}},o=a=>a.done?p(a.value):Promise.resolve(a.value).then(_,h);o((t=t.apply(e,u)).next())});import{u as V,B as q}from"./useForm.8533c118.js";import{L as d,cn as P,aJ as J,eS as L,d as z,i as A,r as y,u as j,N as G,o as K,c as M,q as l,eT as W,J as H,a as r,p as c,K as Q,z as X,eU as Y,A as Z,G as ee}from"./index.1257e8b0.js";import{T as ue,B as te}from"./TableAction.3aeeaebf.js";import ne from"./AddOrUpdateDrawer.c02e7da3.js";import ae from"./ChangeRole.bbb17f35.js";import"./propTypes.c047a88a.js";import"./componentSetting.9cb0737a.js";import"./index.esm.2ecd0768.js";import"./Popconfirm.2f3d4e90.js";import"./role.6235f9ff.js";const oe=[{title:"\u7528\u6237ID",key:"sysUserId",width:80},{title:"\u59D3\u540D",key:"realname"},{title:"\u6027\u522B",key:"sex",render(e){return d("span",{},e.sex===1?"\u7537":"\u5973")},width:80},{title:"\u5934\u50CF",key:"avatarUrl",render(e){return d(P,{src:e.avatarUrl,size:28})}},{title:"\u7F16\u53F7",key:"userNo"},{title:"\u624B\u673A\u53F7",key:"telphone",width:"auto"},{title:"\u8D85\u7BA1",key:"isAdmin",render(e){return d("span",{},e.isAdmin===1?"\u662F":"\u5426")},width:80},{title:"\u72B6\u6001",key:"state",render(e){return d(J,{onUpdateValue:u=>re(e,u),checkedValue:1,uncheckedValue:0,value:e.state},{checked(){return"\u542F\u7528"},unchecked(){return"\u7981\u7528"}})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"createdAt",width:200},{title:"\u4FEE\u6539\u65F6\u95F4",key:"updatedAt",width:200}];function re(e,u){window.$dialog.success({title:`\u786E\u8BA4${u===1?"\u542F\u7528":"\u7981\u7528"}\u8BE5\u7528\u6237\uFF1F`,content:`${u===1?"\u542F\u7528\u540E\u7528\u6237\u53EF\u8FDB\u884C\u767B\u9646\u7B49\u4E00\u7CFB\u5217\u64CD\u4F5C":"\u505C\u7528\u540E\u8BE5\u7528\u6237\u5C06\u7ACB\u5373\u9000\u51FA\u7CFB\u7EDF\u5E76\u4E0D\u53EF\u518D\u6B21\u767B\u9646"}`,positiveText:"\u786E\u8BA4",negativeText:"\u53D6\u6D88",maskClosable:!1,onPositiveClick:()=>se(e,u)})}function se(e,u){e.state=u,L(e).then(()=>{window.$message.success("\u64CD\u4F5C\u6210\u529F")}).catch(t=>{console.log(t)})}const ie=X(" \u65B0\u5EFA "),Ce=z({setup(e){const u=[{field:"sysUserId",component:"LBTextUp",componentProps:{placeholder:"\u7528\u6237ID"}},{field:"realname",component:"LBTextUp",componentProps:{placeholder:"\u7528\u6237\u59D3\u540D"}}],[t,{}]=V({gridProps:{cols:"1 s:2 m:3 l:4 xl:5 xxl:6"},labelWidth:100,schemas:u}),p=A({sysUserId:"",realname:""});function m(n){Object.assign(p,n),a()}function _(n){return w(this,null,function*(){return yield Y(F(F({},p),n))})}const h=A({title:"\u64CD\u4F5C",width:200,key:"action",fixed:"right",align:"center",render(n){return d(ue,{style:"button",actions:[{label:"\u53D8\u66F4\u89D2\u8272",quaternary:!0,type:"primary",onClick:U.bind(null,n),ifShow:()=>!0},{label:"\u4FEE\u6539",quaternary:!0,type:"primary",onClick:b.bind(null,n),ifShow:()=>!0},{label:"\u5220\u9664",quaternary:!0,type:"error",ifShow:()=>!0,popConfirm:{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",confirm:v.bind(null,n)}}]})}}),o=y();function a(){o.value&&(o.value.pagination.page=1,o.value.reload())}const s=y();function E(){s.value.init()}function b(n){const i=JSON.parse(JSON.stringify(n));delete i.createdAt,delete i.updatedAt,s.value.init(i)}const g=y();function U(n){g.value.init(n)}const C=j();function v(n){W(n.sysUserId).then(()=>{C.success("\u5220\u9664\u6210\u529F"),a()}).catch(i=>{C.warning(i||"\u64CD\u4F5C\u5931\u8D25")})}return(n,i)=>{const x=Z,R=G,T=ee,S=H;return K(),M(S,null,{default:l(()=>[r(c(q),{submitOnReset:!0,onRegister:c(t),onSubmit:m},{statusSlot:l(({model:f,field:D})=>[r(x,{value:f[D],"onUpdate:value":$=>f[D]=$},null,8,["value","onUpdate:value"])]),_:1},8,["onRegister"]),r(c(te),{columns:c(oe),request:_,"row-key":f=>f.id,ref_key:"actionRef",ref:o,actionColumn:c(h),"scroll-x":1400},{tableTitle:l(()=>[r(T,{type:"primary",onClick:E},{icon:l(()=>[r(R,null,{default:l(()=>[r(c(Q))]),_:1})]),default:l(()=>[ie]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),r(ne,{onRefresh:a,ref_key:"AddOrUpdateDrawerRef",ref:s},null,512),r(ae,{onRefresh:a,ref_key:"ChangeRoleDrawerRef",ref:g},null,512)]),_:1})}}});export{Ce as default};
