import{_ as k}from"./BasicUpload.b3a5fcb0.js";import{a as T}from"./isv.f10155b8.js";import{h as U,i as K}from"./apps.6db532e1.js";import{d as R,r as c,i as I,u as S,a$ as N,b0 as M,bm as V,j as $,_ as O,o as E,c as A,q as e,a,m as j,a4 as L,a5 as q,z as d,ah as J,a9 as z,ai as G,B as H,C as Q,E as W,A as X,H as Y,bn as Z,N as x,G as aa,b1 as ea,b2 as ua}from"./index.1257e8b0.js";import"./componentSetting.9cb0737a.js";const la=R({name:"AliPayConfig",emits:["refresh"],setup(u,{emit:l}){const v=c(!1),r=I({infoId:"",ifCode:"",ifName:"",ifConfigState:0,state:1,normalMchParams:{},ifParams:{sandbox:0,useCert:0,signType:"RSA2"}}),h={appPublicCert:[{trigger:"blur",validator:(t,n)=>r.ifParams.useCert===1&&!n?new Error("\u8BF7\u4E0A\u4F20\u79C1\u94A5\u6587\u4EF6(apiclient_key.pem)"):!0}],alipayPublicCert:[{trigger:"blur",validator:(t,n)=>r.ifParams.useCert===1&&!n?new Error("\u8BF7\u4E0A\u4F20\u652F\u4ED8\u5B9D\u516C\u94A5\u8BC1\u4E66.crt\u683C\u5F0F)"):!0}],alipayRootCert:[{trigger:"blur",validator:(t,n)=>r.ifParams.useCert===1&&!n?new Error("\u8BF7\u4E0A\u4F20\u652F\u4ED8\u5B9D\u6839\u8BC1\u4E66(.crt\u683C\u5F0F)"):!0}],subMchId:[{trigger:"blur",validator:(t,n)=>r.mchType===2&&!n?new Error("\u8BF7\u8F93\u5165\u5B50\u5546\u6237app_auth_token"):!0}]};function D(t,n){K(n,t).then(p=>{Object.keys(p).length>0&&Object.keys(r.normalMchParams).length>0&&(Object.assign(r,p),r.ifParams=JSON.parse(p.ifParams),r.ifParams.privateKey_ph=r.ifParams.privateKey,r.ifParams.privateKey=void 0,r.ifParams.alipayPublicKey_ph=r.ifParams.alipayPublicKey,r.ifParams.alipayPublicKey=void 0)}).catch(p=>{console.log(p)})}function m(t,n){D(t.ifCode,n),Object.assign(r,t),r.infoId=n,Object.keys(r.normalMchParams).length>0&&(r.normalMchParams=JSON.parse(r.normalMchParams).map(p=>{const F=[];if(p.type==="radio"){const g=p.values.split(","),o=p.titles.split(",");for(const w in g){let b=g[w];isNaN(b)||(b=Number(b)),F.push({value:b,title:o[w]})}p.values=F}return p}),y()),v.value=!0}function y(){r.normalMchParams.forEach(t=>{let n;t.verify==="required"&&t.star!=="1"&&t.type!=="radio"&&(n={required:!0,message:"\u8BF7\u8F93\u5165"+t.desc,trigger:"blur"},h[t.name]=n)})}const P=c(!1);function i(t,n){r.ifParams[n]=t}function s(){l("refresh"),v.value=!1,Object.assign(r,{infoId:"",ifCode:"",ifName:"",ifConfigState:0,state:1,normalMchParams:{},ifParams:{sandbox:0,useCert:0,signType:"RSA2"}})}const _=c(),f=S(),C=c(!1);function B(){_.value.validate(t=>{t?f.error("\u8BF7\u6B63\u786E\u586B\u5199\u6570\u636E\uFF01"):(C.value=!0,r.ifParams.privateKey||delete r.ifParams.privateKey,r.ifParams.alipayPublicKey||delete r.ifParams.alipayPublicKey,U(r).then(()=>{f.success("\u4FEE\u6539\u6210\u529F"),s()}).catch(n=>{console.log(n)}).finally(()=>{C.value=!1}))})}return{showModal:v,formParams:r,IPayConfigTypes:T,rules:h,init:m,loading:P,uploadFinish:i,closeDrawer:s,confirmForm:B,formBtnLoading:C,CloseCircleTwotone:N,CheckCircleTwotone:M,UploadOutlined:V,useUserStore:$,formRef:_}}}),oa=d(" \u542F\u7528 "),ra=d(" \u7981\u7528 "),ta={class:"subTitle"},na=d("\u6C99\u7BB1\u73AF\u5883"),sa=d("\u751F\u4EA7\u73AF\u5883"),ia=d("RSA"),pa=d("RSA2"),fa=d("\u4F7F\u7528\u8BC1\u4E66(\u8BF7\u4F7F\u7528RSA2\u79C1\u94A5)"),ma=d("\u4E0D\u4F7F\u7528\u8BC1\u4E66"),da=d(" \u53D6\u6D88 "),_a=d(" \u4FDD\u5B58 ");function Pa(u,l,v,r,h,D){const m=J,y=z,P=G,i=H,s=Q,_=W,f=X,C=Y,B=Z,t=k,n=x,p=aa,F=ea,g=ua;return E(),A(g,{show:u.showModal,"onUpdate:show":l[18]||(l[18]=o=>u.showModal=o),width:"40%",onAfterLeave:u.closeDrawer},{default:e(()=>[a(F,{title:"\u652F\u4ED8\u53C2\u6570\u914D\u7F6E"},{footer:e(()=>[a(y,{align:"center"},{default:e(()=>[a(p,{onClick:u.closeDrawer},{icon:e(()=>[a(n,{component:u.CloseCircleTwotone},null,8,["component"])]),default:e(()=>[da]),_:1},8,["onClick"]),a(p,{type:"info",loading:u.formBtnLoading,onClick:u.confirmForm},{icon:e(()=>[a(n,{component:u.CheckCircleTwotone},null,8,["component"])]),default:e(()=>[_a]),_:1},8,["loading","onClick"])]),_:1})]),default:e(()=>[a(C,{model:u.formParams,rules:u.rules,"label-width":80,ref:"formRef"},{default:e(()=>[a(_,{gutter:"12"},{default:e(()=>[a(s,{span:12},{default:e(()=>[a(i,{label:"\u72B6\u6001",path:u.IPayConfigTypes.state},{default:e(()=>[a(P,{value:u.formParams.state,"onUpdate:value":l[2]||(l[2]=o=>u.formParams.state=o),name:"state"},{default:e(()=>[a(y,null,{default:e(()=>[a(m,{value:1,onChange:l[0]||(l[0]=o=>u.formParams.state=1)},{default:e(()=>[oa]),_:1}),a(m,{value:0,onChange:l[1]||(l[1]=o=>u.formParams.state=0)},{default:e(()=>[ra]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["path"])]),_:1})]),_:1}),a(i,{label:"\u5907\u6CE8",path:u.IPayConfigTypes.remark},{default:e(()=>[a(f,{type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",value:u.formParams.remark,"onUpdate:value":l[3]||(l[3]=o=>u.formParams.remark=o)},null,8,["value"])]),_:1},8,["path"])]),_:1},8,["model","rules"]),a(B,{"title-placement":"left"},{default:e(()=>[j("div",ta,L(u.formParams.ifCode+" \u670D\u52A1\u5546\u53C2\u6570\u914D\u7F6E"),1)]),_:1}),a(C,{model:u.formParams.ifParams,rules:u.rules,"label-width":80,ref:"formRef"},{default:e(()=>[u.formParams.mchType===1?(E(),A(_,{key:0,gutter:16},{default:e(()=>[a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u73AF\u5883\u914D\u7F6E",path:"sandbox"},{default:e(()=>[a(P,{value:u.formParams.ifParams.sandbox,"onUpdate:value":l[4]||(l[4]=o=>u.formParams.ifParams.sandbox=o),defaultValue:0},{default:e(()=>[a(m,{value:1},{default:e(()=>[na]),_:1}),a(m,{value:0},{default:e(()=>[sa]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(s,{span:"12"},{default:e(()=>[a(i,{label:"\u5408\u4F5C\u4F19\u4F34\u8EAB\u4EFD(PID)",path:"pid"},{default:e(()=>[a(f,{value:u.formParams.ifParams.pid,"onUpdate:value":l[5]||(l[5]=o=>u.formParams.ifParams.pid=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(s,{span:"12"},{default:e(()=>[a(i,{label:"\u5E94\u7528AppID",path:"appId"},{default:e(()=>[a(f,{value:u.formParams.ifParams.appId,"onUpdate:value":l[6]||(l[6]=o=>u.formParams.ifParams.appId=o),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u5E94\u7528\u79C1\u94A5",path:"privateKey"},{default:e(()=>[a(f,{value:u.formParams.ifParams.privateKey,"onUpdate:value":l[7]||(l[7]=o=>u.formParams.ifParams.privateKey=o),placeholder:u.formParams.ifParams.privateKey_ph,type:"textarea"},null,8,["value","placeholder"])]),_:1})]),_:1}),a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u652F\u4ED8\u5B9D\u516C\u94A5",path:"alipayPublicKey"},{default:e(()=>[a(f,{value:u.formParams.ifParams.alipayPublicKey,"onUpdate:value":l[8]||(l[8]=o=>u.formParams.ifParams.alipayPublicKey=o),placeholder:u.formParams.ifParams.alipayPublicKey_ph,type:"textarea"},null,8,["value","placeholder"])]),_:1})]),_:1}),a(s,{span:"12"},{default:e(()=>[a(i,{label:"\u63A5\u53E3\u7B7E\u540D\u65B9\u5F0F(\u63A8\u8350\u4F7F\u7528RSA2)",path:"signType"},{default:e(()=>[a(P,{value:u.formParams.ifParams.signType,"onUpdate:value":l[9]||(l[9]=o=>u.formParams.ifParams.signType=o),defaultValue:"RSA"},{default:e(()=>[a(m,{value:"RSA"},{default:e(()=>[ia]),_:1}),a(m,{value:"RSA2"},{default:e(()=>[pa]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(s,{span:"12"},{default:e(()=>[a(i,{label:"\u516C\u94A5\u8BC1\u4E66",path:"useCert"},{default:e(()=>[a(P,{value:u.formParams.ifParams.useCert,"onUpdate:value":l[10]||(l[10]=o=>u.formParams.ifParams.useCert=o),defaultValue:0},{default:e(()=>[a(m,{value:1},{default:e(()=>[fa]),_:1}),a(m,{value:0},{default:e(()=>[ma]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u5E94\u7528\u516C\u94A5\u8BC1\u4E66(.crt\u683C\u5F0F)",path:"appPublicCert"},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{span:"24"},{default:e(()=>[a(f,{value:u.formParams.ifParams.appPublicCert,"onUpdate:value":l[11]||(l[11]=o=>u.formParams.ifParams.appPublicCert=o),disabled:"disabled"},null,8,["value"])]),_:1}),a(s,{span:"24"},{default:e(()=>[a(t,{name:"file",uploadType:"cert",onUploadFinish:l[12]||(l[12]=o=>u.uploadFinish(o,"appPublicCert"))})]),_:1})]),_:1})]),_:1})]),_:1}),a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u652F\u4ED8\u5B9D\u516C\u94A5\u8BC1\u4E66(.crt\u683C\u5F0F)",path:"alipayPublicCert"},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{span:"24"},{default:e(()=>[a(f,{value:u.formParams.ifParams.alipayPublicCert,"onUpdate:value":l[13]||(l[13]=o=>u.formParams.ifParams.alipayPublicCert=o),disabled:"disabled"},null,8,["value"])]),_:1}),a(s,{span:"24"},{default:e(()=>[a(t,{name:"file",uploadType:"cert",onUploadFinish:l[14]||(l[14]=o=>u.uploadFinish(o,"alipayPublicCert"))})]),_:1})]),_:1})]),_:1})]),_:1}),a(s,{span:"24"},{default:e(()=>[a(i,{label:"\u652F\u4ED8\u5B9D\u6839\u8BC1\u4E66\uFF08.crt\u683C\u5F0F\uFF09",path:"alipayRootCert"},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{span:"24"},{default:e(()=>[a(f,{value:u.formParams.ifParams.alipayRootCert,"onUpdate:value":l[15]||(l[15]=o=>u.formParams.ifParams.alipayRootCert=o),disabled:"disabled"},null,8,["value"])]),_:1}),a(s,{span:"24"},{default:e(()=>[a(t,{name:"file",uploadType:"cert",onUploadFinish:l[16]||(l[16]=o=>u.uploadFinish(o,"alipayRootCert"))})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):u.formParams.mchType===2?(E(),A(_,{key:1,gutter:16},{default:e(()=>[a(s,{span:"12"},{default:e(()=>[a(i,{label:"\u5B50\u5546\u6237app_auth_token",path:"appAuthToken"},{default:e(()=>[a(f,{modelValue:u.formParams.appAuthToken,"onUpdate:modelValue":l[17]||(l[17]=o=>u.formParams.appAuthToken=o),placeholder:"\u8BF7\u8F93\u5165\u5B50\u5546\u6237app_auth_token"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):q("",!0)]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["show","onAfterLeave"])}var ba=O(la,[["render",Pa],["__scopeId","data-v-7fcdc10f"]]);export{ba as default};
