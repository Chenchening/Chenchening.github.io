import{g as w,s as b,c as I}from"./role.6235f9ff.js";import{d as D,r as f,i as L,e as y,u as R,f as U,a$ as F,b0 as B,_ as M,o as h,c as k,q as o,a as s,g as N,a2 as E,M as S,z as v,F as T,bn as $,a9 as O,ag as j,N as z,G as V,b1 as q,b2 as G}from"./index.1257e8b0.js";const J=D({name:"ChangeRole",setup(){const e=f(!1),a=f(!1),u=L([]),l=f([]);function m(t){e.value=!0,c.value=t.sysUserId,i()}const C=y(()=>l.value.length===u.length);function r(){w(Object.assign({pageSize:-1})).then(t=>{u.push(...t.records)})}const c=f();function i(){l.value.length=0,b(Object.assign({pageSize:-1,userId:c.value})).then(t=>{t.records.forEach(n=>{l.value.push(n.roleId)})})}function g(t){l.value.length=0,t&&u.forEach(n=>{l.value.push(n.roleId)})}const d=R();function _(){I(c.value,Object.assign({roleIdListStr:JSON.stringify(l.value)})).then(()=>{d.success("\u4FEE\u6539\u6210\u529F"),p()})}function p(){e.value=!1}return U(()=>{r()}),{showModal:e,formBtnLoading:a,allChecked:C,roleList:u,roleIdList:l,handleCheckedChange:g,confirmForm:_,CloseCircleTwotone:F,CheckCircleTwotone:B,closeDrawer:p,init:m}}}),A=v(" \u53D6\u6D88 "),H=v(" \u4FDD\u5B58 ");function K(e,a,u,l,m,C){const r=T,c=$,i=O,g=j,d=z,_=V,p=q,t=G;return h(),k(t,{show:e.showModal,"onUpdate:show":a[2]||(a[2]=n=>e.showModal=n),width:600},{default:o(()=>[s(p,{title:"\u5206\u914D\u89D2\u8272"},{footer:o(()=>[s(i,{align:"center"},{default:o(()=>[s(_,{onClick:e.closeDrawer},{icon:o(()=>[s(d,{component:e.CloseCircleTwotone},null,8,["component"])]),default:o(()=>[A]),_:1},8,["onClick"]),s(_,{type:"info",loading:e.formBtnLoading,onClick:e.confirmForm},{icon:o(()=>[s(d,{component:e.CheckCircleTwotone},null,8,["component"])]),default:o(()=>[H]),_:1},8,["loading","onClick"])]),_:1})]),default:o(()=>[s(r,{value:"all",label:"\u5168\u9009",checked:e.allChecked,"onUpdate:checked":[a[0]||(a[0]=n=>e.allChecked=n),e.handleCheckedChange]},null,8,["checked","onUpdate:checked"]),s(c),s(g,{value:e.roleIdList,"onUpdate:value":a[1]||(a[1]=n=>e.roleIdList=n)},{default:o(()=>[s(i,{"item-style":"display: flex;"},{default:o(()=>[(h(!0),N(S,null,E(e.roleList,n=>(h(),k(r,{key:n.roleId,label:n.roleName,value:n.roleId},null,8,["label","value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["show"])}var W=M(J,[["render",K]]);export{W as default};
